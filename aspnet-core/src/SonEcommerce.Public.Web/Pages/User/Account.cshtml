@page "/user/account"
@model SonEcommerce.Public.Web.Pages.User.AccountModel
@using SonEcommerce.Public.Products;
@inject IProductsAppService _productsAppService;
@{
}
<section class="section-box shop-template mt-30">
    <div class="container box-account-template">
        <h3>Hello @Model.CurrentUser.Surname @Model.CurrentUser.Name</h3>
        <p class="font-md color-gray-500">From your account dashboard. you can easily check & view your recent orders,<br class="d-none d-lg-block">manage your shipping and billing addresses and edit your password and account details.</p>
        <div class="box-tabs mb-100">
            <ul class="nav nav-tabs nav-tabs-account" role="tablist">
                <li><a class="active" href="#tab-setting" data-bs-toggle="tab" role="tab" aria-controls="tab-setting" aria-selected="true">Setting</a></li>
                <li><a href="#tab-orders" data-bs-toggle="tab" role="tab" aria-controls="tab-orders" aria-selected="true">Orders</a></li>
            </ul>
            <div class="border-bottom mt-20 mb-40"></div>
            <div class="tab-content mt-30">
                <div class="tab-pane fade " id="tab-orders" role="tabpanel" aria-labelledby="tab-orders">
                    @foreach (var item in Model.Orders)
                    {
                        <div class="box-orders">
                            <div class="head-orders">
                                <div class="head-left">
                                    <h5 class="mr-20">Order ID:  @item.Code</h5><span class="font-md color-brand-3 mr-20">Date: @String.Format("{0:yyyy-MM-dd HH:mm:ss}", @item.CreationTime)</span>

                                    <span class="label-delivery">@item.Status</span>
                                </div>
                                <div class="head-right"><a class="btn btn-buy font-sm-bold w-auto">Xem chi tiết</a></div>
                            </div>
                            <div class="body-orders">
                                <div class="list-orders">
                                    @foreach (var orderItem in item.OrderItems)
                                    {
                                        var fileContent = await _productsAppService.GetThumbnailImageAsync(orderItem.Product.ThumbnailPicture);
                                        var base64Image = SonEcommerce.Helpers.ImageHelper.ShowBase64(orderItem.Product.ThumbnailPicture, fileContent);
                                        <div class="item-orders">
                                            <div class="image-orders"><img src="@base64Image" alt="Ecom"></div>
                                            <div class="info-orders">
                                                <h5>@orderItem.Product.Name</h5>
                                            </div>
                                            <div class="quantity-orders">
                                                <h5>Quantity: @orderItem.Quantity</h5>
                                            </div>
                                            <div class="price-orders">
                                                <h3>$@orderItem.Price</h3>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }

                    <nav>
                        <ul class="pagination">
                            <li class="page-item"><a class="page-link page-prev" href="#"></a></li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link active" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">4</a></li>
                            <li class="page-item"><a class="page-link" href="#">5</a></li>
                            <li class="page-item"><a class="page-link" href="#">6</a></li>
                            <li class="page-item"><a class="page-link page-next" href="#"></a></li>
                        </ul>
                    </nav>
                </div>
                @* Chỉnh Sửa Thông Tin Người DÙng *@
                <div class="tab-pane fade active show" id="tab-setting" role="tabpanel" aria-labelledby="tab-setting">
                    <div class="row">
                        <div class="col-lg-6 mb-20">
                            <form method="post">
                                <div class="row">
                                    <div class="col-lg-12 mb-20">
                                        <h5 class="font-md-bold color-brand-3 text-sm-start text-center">Thông Tin Khách Hàng</h5>
                                    </div>
                                    <input id="UserId" asp-for="userId" class="form-control font-sm" type="text" placeholder="Họ *" value="@Model.CurrentUser.Id" hidden>

                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="surname">Họ *</label>
                                            <input id="surname" asp-for="UpdateUser.Surname" class="form-control" font-sm" type="text" placeholder="Họ *" value="@Model.CurrentUser.Surname">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="name">Tên *</label>
                                            <input id="name" asp-for="UpdateUser.Name" class="form-control" font-sm" type="text" placeholder="Tên *" value="@Model.CurrentUser.Name">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="phone">Số Điện Thoại *</label>
                                            <input id="phone" asp-for="UpdateUser.PhoneNumber" class="form-control" font-sm" type="text" placeholder="Số Điện Thoại *" value="@Model.CurrentUser.PhoneNumber">
                                            <span asp-validation-for="UpdateUser.PhoneNumber" class="text-danger"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="email">Email *</label>
                                            <input id="email" asp-for="UpdateUser.Email" class="form-control" font-sm" type="text" placeholder="Email *" value="@Model.CurrentUser.Email">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        @if (!Model.CurrentUser.EmailConfirmed)
                                        {
                                            <div class="form-group">
                                                <button type="submit" class="btn btn-primary" asp-page-handler="SendEmailConfirmation" id="btnVerifyEmail">Xác thực Email</button>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="form-group">
                                                <span class="text-success">Đã xác thực</span>
                                            </div>
                                        }
                                    </div>

                                    <div class="col-lg-6" id="otpContainer" style="display: none;">
                                        <form class="form-group" method="post">
                                            <label for="otp">Nhập mã OTP *</label>
                                            <input id="otp" asp-for="OTP" class="form-control" type="text" placeholder="Nhập mã OTP *" />
                                            <div class="form-group">
                                                <button type="submit" class="btn btn-primary" asp-page-handler="VerifyEmail" id="btnVerifyOTP">Xác thực OTP</button>
                                            </div>
                                        </form>
                                    </div>

                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="tinh">Tỉnh Thành</label>
                                            <select class="form-control" asp-for="UpdateUser.UserCity" id="tinh" name="UpdateUser.UserCity" title="Chọn Tỉnh Thành">


                                                <option value="0">Tỉnh Thành</option>


                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="quan">Quận Huyện</label>
                                            <select class="form-control" asp-for="UpdateUser.UserDistrict" id="quan" name="UpdateUser.UserDistrict" title="Chọn Quận Huyện">


                                                <option value="0">Quận Huyện</option>


                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="form-group">
                                            <label for="phuong">Phường Xã</label>
                                            <select class="form-control" asp-for="UpdateUser.UserWard" id="phuong" name="UpdateUser.UserWard" title="Chọn Phường Xã">

                                                <option value="0">Phường Xã</option>



                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <label for="address">Địa Chỉ Cụ Thể *</label>
                                            <input id="address" asp-for="UpdateUser.UserAddress" class="form-control" font-sm" type="text" placeholder="Địa Chỉ *" value="@Model.CurrentUser.UserAddress">
                                        </div>
                                    </div>

                                    <!-- Thêm các thẻ select vào đây -->


                                    <div class="col-lg-12">
                                        <div class="form-group mt-20">
                                            <input type="submit" class="btn btn-buy w-auto h54 font-md-bold" value="Save change">
                                        </div>
                                    </div>
                                </div>
                            </form>

                        </div>
                        <div class="col-lg-1 mb-20"></div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="ModalFiltersForm" tabindex="-1" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content apply-job-form">
            <div class="modal-header">
                <h5 class="modal-title color-gray-1000 filters-icon">Addvance Fillters</h5>
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-30">
                <div class="row">
                    <div class="col-w-1">
                        <h6 class="color-gray-900 mb-0">Brands</h6>
                        <ul class="list-checkbox">
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox" checked="checked"><span class="text-small">Apple</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Samsung</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Baseus</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Remax</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Handtown</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Elecom</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Razer</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Auto Focus</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Nillkin</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Logitech</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">ChromeBook</span><span class="checkmark"></span>
                                </label>
                            </li>
                        </ul>
                    </div>
                    <div class="col-w-1">
                        <h6 class="color-gray-900 mb-0">Special offers</h6>
                        <ul class="list-checkbox">
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">On sale</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox" checked="checked"><span class="text-small">FREE shipping</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Big deals</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Shop Mall</span><span class="checkmark"></span>
                                </label>
                            </li>
                        </ul>
                        <h6 class="color-gray-900 mb-0 mt-40">Ready to ship in</h6>
                        <ul class="list-checkbox">
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">1 business day</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox" checked="checked"><span class="text-small">1&ndash;3 business days</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">in 1 week</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Shipping now</span><span class="checkmark"></span>
                                </label>
                            </li>
                        </ul>
                    </div>
                    <div class="col-w-1">
                        <h6 class="color-gray-900 mb-0">Ordering options</h6>
                        <ul class="list-checkbox">
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Accepts gift cards</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Customizable</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox" checked="checked"><span class="text-small">Can be gift-wrapped</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Installment 0%</span><span class="checkmark"></span>
                                </label>
                            </li>
                        </ul>
                        <h6 class="color-gray-900 mb-0 mt-40">Rating</h6>
                        <ul class="list-checkbox">
                            <li class="mb-5"><a href="#"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><span class="ml-10 font-xs color-gray-500 d-inline-block align-top">(5 stars)</span></a></li>
                            <li class="mb-5"><a href="#"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><span class="ml-10 font-xs color-gray-500 d-inline-block align-top">(4 stars)</span></a></li>
                            <li class="mb-5"><a href="#"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><span class="ml-10 font-xs color-gray-500 d-inline-block align-top">(3 stars)</span></a></li>
                            <li class="mb-5"><a href="#"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><span class="ml-10 font-xs color-gray-500 d-inline-block align-top">(2 stars)</span></a></li>
                            <li class="mb-5"><a href="#"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><img src="assets/imgs/template/icons/star-gray.svg" alt="Ecom"><span class="ml-10 font-xs color-gray-500 d-inline-block align-top">(1 star)</span></a></li>
                        </ul>
                    </div>
                    <div class="col-w-2">
                        <h6 class="color-gray-900 mb-0">Material</h6>
                        <ul class="list-checkbox">
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Nylon (8)</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Tempered Glass (5)</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox" checked="checked"><span class="text-small">Liquid Silicone Rubber (5)</span><span class="checkmark"></span>
                                </label>
                            </li>
                            <li>
                                <label class="cb-container">
                                    <input type="checkbox"><span class="text-small">Aluminium Alloy (3)</span><span class="checkmark"></span>
                                </label>
                            </li>
                        </ul>
                        <h6 class="color-gray-900 mb-20 mt-40">Product tags</h6>
                        <div><a class="btn btn-border mr-5" href="#">Games</a><a class="btn btn-border mr-5" href="#">Electronics</a><a class="btn btn-border mr-5" href="#">Video</a><a class="btn btn-border mr-5" href="#">Cellphone</a><a class="btn btn-border mr-5" href="#">Indoor</a><a class="btn btn-border mr-5" href="#">VGA Card</a><a class="btn btn-border mr-5" href="#">USB</a><a class="btn btn-border mr-5" href="#">Lightning</a><a class="btn btn-border mr-5" href="#">Camera</a></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-start pl-30"><a class="btn btn-buy w-auto" href="#">Apply Fillter</a><a class="btn font-sm-bold color-gray-500" href="#">Reset Fillter</a></div>
        </div>
    </div>
</div>
<div class="modal fade" id="ModalQuickview" tabindex="-1" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-xl">
        <div class="modal-content apply-job-form">
            <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            <div class="modal-body p-30">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="gallery-image">
                            <div class="galleries-2">
                                <div class="detail-gallery">
                                    <div class="product-image-slider-2">
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-1.jpg" alt="product image"></figure>
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-2.jpg" alt="product image"></figure>
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-3.jpg" alt="product image"></figure>
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-4.jpg" alt="product image"></figure>
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-5.jpg" alt="product image"></figure>
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-6.jpg" alt="product image"></figure>
                                        <figure class="border-radius-10"><img src="assets/imgs/page/product/img-gallery-7.jpg" alt="product image"></figure>
                                    </div>
                                </div>
                                <div class="slider-nav-thumbnails-2">
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-1.jpg" alt="product image"></div>
                                    </div>
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-2.jpg" alt="product image"></div>
                                    </div>
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-3.jpg" alt="product image"></div>
                                    </div>
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-4.jpg" alt="product image"></div>
                                    </div>
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-5.jpg" alt="product image"></div>
                                    </div>
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-6.jpg" alt="product image"></div>
                                    </div>
                                    <div>
                                        <div class="item-thumb"><img src="assets/imgs/page/product/img-gallery-7.jpg" alt="product image"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box-tags">
                            <div class="d-inline-block mr-25"><span class="font-sm font-medium color-gray-900">Category:</span><a class="link" href="#">Smartphones</a></div>
                            <div class="d-inline-block"><span class="font-sm font-medium color-gray-900">Tags:</span><a class="link" href="#">Blue</a>,<a class="link" href="#">Smartphone</a></div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="product-info">
                            <h5 class="mb-15">SAMSUNG Galaxy S22 Ultra, 8K Camera & Video, Brightest Display Screen, S Pen Pro</h5>
                            <div class="info-by">
                                <span class="bytext color-gray-500 font-xs font-medium">by</span><a class="byAUthor color-gray-900 font-xs font-medium" href="shop-vendor-list.html"> Ecom Tech</a>
                                <div class="rating d-inline-block"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><img src="assets/imgs/template/icons/star.svg" alt="Ecom"><span class="font-xs color-gray-500 font-medium"> (65 reviews)</span></div>
                            </div>
                            <div class="border-bottom pt-10 mb-20"></div>
                            <div class="box-product-price">
                                <h3 class="color-brand-3 price-main d-inline-block mr-10">$2856.3</h3><span class="color-gray-500 price-line font-xl line-througt">$3225.6</span>
                            </div>
                            <div class="product-description mt-10 color-gray-900">
                                <ul class="list-dot">
                                    <li>8k super steady video</li>
                                    <li>Nightography plus portait mode</li>
                                    <li>50mp photo resolution plus bright display</li>
                                    <li>Adaptive color contrast</li>
                                    <li>premium design & craftmanship</li>
                                    <li>Long lasting battery plus fast charging</li>
                                </ul>
                            </div>
                            <div class="box-product-color mt-10">
                                <p class="font-sm color-gray-900">Color:<span class="color-brand-2 nameColor">Pink Gold</span></p>
                                <ul class="list-colors">
                                    <li class="disabled"><img src="assets/imgs/page/product/img-gallery-1.jpg" alt="Ecom" title="Pink"></li>
                                    <li><img src="assets/imgs/page/product/img-gallery-2.jpg" alt="Ecom" title="Gold"></li>
                                    <li><img src="assets/imgs/page/product/img-gallery-3.jpg" alt="Ecom" title="Pink Gold"></li>
                                    <li><img src="assets/imgs/page/product/img-gallery-4.jpg" alt="Ecom" title="Silver"></li>
                                    <li class="active"><img src="assets/imgs/page/product/img-gallery-5.jpg" alt="Ecom" title="Pink Gold"></li>
                                    <li class="disabled"><img src="assets/imgs/page/product/img-gallery-6.jpg" alt="Ecom" title="Black"></li>
                                    <li class="disabled"><img src="assets/imgs/page/product/img-gallery-7.jpg" alt="Ecom" title="Red"></li>
                                </ul>
                            </div>
                            <div class="box-product-style-size mt-10">
                                <div class="row">
                                    <div class="col-lg-12 mb-10">
                                        <p class="font-sm color-gray-900">Style:<span class="color-brand-2 nameStyle">S22</span></p>
                                        <ul class="list-styles">
                                            <li class="disabled" title="S22 Ultra">S22 Ultra</li>
                                            <li class="active" title="S22">S22</li>
                                            <li title="S22 + Standing Cover">S22 + Standing Cover</li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-12 mb-10">
                                        <p class="font-sm color-gray-900">Size:<span class="color-brand-2 nameSize">512GB</span></p>
                                        <ul class="list-sizes">
                                            <li class="disabled" title="1GB">1GB</li>
                                            <li class="active" title="512 GB">512 GB</li>
                                            <li title="256 GB">256 GB</li>
                                            <li title="128 GB">128 GB</li>
                                            <li class="disabled" title="64GB">64GB</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="buy-product mt-5">
                                <p class="font-sm mb-10">Quantity</p>
                                <div class="box-quantity">
                                    <div class="input-quantity">
                                        <input class="font-xl color-brand-3" type="text" value="1"><span class="minus-cart"></span><span class="plus-cart"></span>
                                    </div>
                                    <div class="button-buy"><a class="btn btn-cart" href="shop-cart.html">Add to cart</a><a class="btn btn-buy" href="shop-checkout.html">Buy now</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://esgoo.net/scripts/jquery.js"></script>
<script>
    $(document).ready(function () {
        var userCity = '@(Model.CurrentUser.UserCity ?? "null")';
        console.log(userCity);
        if (userCity === "null") {
            userCity = null;
        }
        var userDistrict = '@(Model.CurrentUser.UserDistrict ?? "null")';
        if (userDistrict === "null") {
            userDistrict = null;
        }
        var userWard = '@(Model.CurrentUser.UserWard ?? "null")';
        if (userWard === "null") {
            userWard = null;
        }

        //Lấy tỉnh thành
        $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function (data_tinh) {
            if (data_tinh.error == 0) {
                // Xóa các option hiện tại của select
                $("#tinh").empty();

                // Thêm option mặc định
                $("#tinh").append('<option value="0">Thành Phố</option>');

                // Thêm các tỉnh thành từ API
                $.each(data_tinh.data, function (key_tinh, val_tinh) {
                    if (userCity == val_tinh.id) {
                        $("#tinh").append('<option selected value="' + userCity + '">' + val_tinh.full_name + '</option>');
                    } else {
                        $("#tinh").append('<option value="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                    }
                });

                // Trigger the change event to load the districts
                if (userCity) {
                    $("#tinh").trigger('change');
                }
            } else {
                // Nếu có lỗi trong lấy dữ liệu từ API, bạn có thể xử lý ở đây.
                console.log("Lỗi khi lấy dữ liệu tỉnh thành từ API.");
            }
        });

        // Thiết lập sự kiện thay đổi cho select tỉnh thành
        $("#tinh").change(function (e) {
            var idtinh = $(this).val();
            console.log(idtinh);

            //Lấy quận huyện
            $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function (data_quan) {
                console.log(data_quan);
                if (data_quan.error == 0) {
                    $("#quan").html('<option value="0">Quận Huyện</option>');
                    $("#phuong").html('<option value="0">Phường Xã</option>');
                    $.each(data_quan.data, function (key_quan, val_quan) {
                        if (userDistrict == val_quan.id) {
                            $("#quan").append('<option selected value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                        } else {
                            $("#quan").append('<option value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                        }
                    });

                    // Trigger the change event to load the wards
                    if (userDistrict) {
                        $("#quan").trigger('change');
                    }
                }
            });
        });

        // Thiết lập sự kiện thay đổi cho select quận huyện
        $("#quan").change(function (e) {
            var idquan = $(this).val();

            //Lấy phường xã
            $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function (data_phuong) {
                if (data_phuong.error == 0) {
                    $("#phuong").html('<option value="0">Phường Xã</option>');
                    $.each(data_phuong.data, function (key_phuong, val_phuong) {
                        if (userWard == val_phuong.id) {
                            $("#phuong").append('<option selected value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                        } else {
                            $("#phuong").append('<option value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                        }
                    });
                }
            });
        });

        // Initial trigger for district and ward if city is already selected
        if (userCity) {
            $("#tinh").trigger('change');
        }
    });
    $(document).ready(function () {
        // Kiểm tra TempData để hiển thị lại ô OTP nếu cần
        var showOTP = '@TempData["ShowOTP"]';
        if (showOTP === 'True') {
            $('#otpContainer').show(); // Hiển thị ô nhập mã OTP khi cần thiết
        }

        // Xử lý sự kiện khi click vào nút "Xác thực Email"
        $('#btnVerifyEmail').click(function () {
            $('#otpContainer').show(); // Hiển thị ô nhập mã OTP khi click vào nút "Xác thực Email"
        });
    });

</script>









